{% extends "base.html" %}

{% block content %}
<h2>Your Cart</h2>

{% if items %}
<table border="1" cellpadding="6" cellspacing="0" style="border-collapse: collapse; width: 100%;">
  <tr>
    <th>Product</th>
    <th>Quantity</th>
    <th>Subtotal</th>
    <th>Action</th>
  </tr>
  {% for item in items %}
  <tr data-item-id="{{ item.id }}">
    <td>{{ item.product.name }}</td>
    <td>
      <button class="decrement-btn">-</button>
      <input type="number" value="{{ item.quantity }}" min="1" class="quantity-input" style="width: 50px; text-align:center;">
      <button class="increment-btn">+</button>
    </td>
    <td class="subtotal">Ksh {{ item.subtotal_int }}</td>
    <td>
      <button class="remove-btn">Remove</button>
    </td>
  </tr>
  {% endfor %}
  <tr>
    <td colspan="2"><strong>Total</strong></td>
    <td colspan="2"><strong>Ksh <span id="cart-total">{{ total }}</span></strong></td>
  </tr>
</table>

<form method="POST" action="{% url 'checkout' %}" style="margin-top: 20px;">
  {% csrf_token %}
  <button type="submit">Place Order</button>
</form>

{% else %}
<p>Your cart is empty.</p>
{% endif %}
{% endblock %}
